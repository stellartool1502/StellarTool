<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Working PDF Editor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }
        
        body {
            background: #f5f5f5;
            padding: 20px;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        h1 {
            text-align: center;
            color: #333;
            margin-bottom: 30px;
        }
        
        .upload-section {
            text-align: center;
            padding: 40px;
            border: 3px dashed #007bff;
            border-radius: 10px;
            margin-bottom: 20px;
            background: #f8f9fa;
        }
        
        .upload-btn {
            background: #007bff;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px;
        }
        
        .editor-section {
            display: none;
        }
        
        .tools {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            padding: 10px 15px;
            border: 2px solid #007bff;
            background: white;
            color: #007bff;
            border-radius: 5px;
            cursor: pointer;
        }
        
        .tool-btn.active {
            background: #007bff;
            color: white;
        }
        
        .pdf-preview {
            border: 2px solid #ddd;
            padding: 20px;
            min-height: 600px;
            background: #f9f9f9;
            position: relative;
            overflow: auto;
        }
        
        .page {
            background: white;
            margin: 0 auto;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
            min-height: 800px;
            width: 600px;
        }
        
        .editable-area {
            position: absolute;
            background: rgba(255,255,255,0.9);
            padding: 8px 12px;
            border: 2px solid #007bff;
            border-radius: 5px;
            cursor: move;
            min-width: 100px;
            min-height: 30px;
        }
        
        .editable-area:focus {
            outline: none;
            border-color: #ff0000;
            background: rgba(255,255,255,0.95);
        }
        
        .download-btn {
            background: #28a745;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .tool-options {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            display: none;
        }
        
        input, select, button {
            padding: 8px 12px;
            margin: 5px;
            border: 1px solid #ddd;
            border-radius: 3px;
        }
        
        .color-option {
            display: inline-block;
            width: 30px;
            height: 30px;
            border-radius: 3px;
            margin: 5px;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option.active {
            border-color: #000;
        }
        
        .status {
            text-align: center;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .click-instruction {
            position: absolute;
            top: 10px;
            left: 10px;
            background: #ffeb3b;
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>PDF Editor - Add Text to Your PDF</h1>
        
        <div class="upload-section" id="uploadSection">
            <h2>Upload PDF File</h2>
            <p>Choose a PDF file to start editing</p>
            <button class="upload-btn" onclick="document.getElementById('fileInput').click()">Choose PDF File</button>
            <input type="file" id="fileInput" accept=".pdf" style="display: none;">
        </div>
        
        <div class="editor-section" id="editorSection">
            <div class="tools">
                <button class="tool-btn active" onclick="activateTool('click')">‚úèÔ∏è Click to Add Text</button>
                <button class="tool-btn" onclick="activateTool('signature')">üñãÔ∏è Add Signature</button>
                <button class="tool-btn" onclick="activateTool('date')">üìÖ Add Date</button>
                <button class="tool-btn" onclick="clearAll()">üóëÔ∏è Clear All</button>
            </div>
            
            <div class="tool-options" id="toolOptions">
                <div>
                    <strong>Text Options:</strong>
                    <input type="text" id="textInput" placeholder="Enter your text" value="Your Text Here">
                    <select id="fontSize">
                        <option value="12">12px</option>
                        <option value="14">14px</option>
                        <option value="16" selected>16px</option>
                        <option value="18">18px</option>
                        <option value="20">20px</option>
                        <option value="24">24px</option>
                    </select>
                    
                    <div style="margin: 10px 0;">
                        <strong>Color:</strong>
                        <div class="color-option active" style="background: #000000;" onclick="selectColor('#000000')"></div>
                        <div class="color-option" style="background: #ff0000;" onclick="selectColor('#ff0000')"></div>
                        <div class="color-option" style="background: #0000ff;" onclick="selectColor('#0000ff')"></div>
                        <div class="color-option" style="background: #008000;" onclick="selectColor('#008000')"></div>
                        <div class="color-option" style="background: #ffa500;" onclick="selectColor('#ffa500')"></div>
                    </div>
                    
                    <button class="tool-btn" onclick="applyTextSettings()">Apply to All</button>
                </div>
            </div>
            
            <div class="status success" id="statusMessage">
                ‚úÖ PDF loaded! Click anywhere on the document to add text. Drag to move, double-click to edit.
            </div>
            
            <div class="pdf-preview" id="pdfPreview">
                <div class="click-instruction" id="clickInstruction">Click here to add text</div>
                <div class="page" id="pdfPage">
                    <!-- PDF content will be added here -->
                </div>
            </div>
            
            <button class="download-btn" id="downloadBtn" onclick="downloadPDF()">‚¨áÔ∏è Download Edited PDF</button>
        </div>
    </div>

    <script>
        let currentFile = null;
        let currentTool = 'click';
        let elements = [];
        let selectedColor = '#000000';
        let nextElementId = 1;

        // File input handler
        document.getElementById('fileInput').addEventListener('change', function(e) {
            if (e.target.files[0]) {
                loadPDF(e.target.files[0]);
            }
        });

        function loadPDF(file) {
            if (file.type !== 'application/pdf') {
                alert('Please select a PDF file');
                return;
            }
            
            currentFile = file;
            
            // Show editor section
            document.getElementById('uploadSection').style.display = 'none';
            document.getElementById('editorSection').style.display = 'block';
            document.getElementById('downloadBtn').style.display = 'block';
            document.getElementById('toolOptions').style.display = 'block';
            document.getElementById('clickInstruction').style.display = 'block';
            
            // Create PDF page representation
            const page = document.getElementById('pdfPage');
            page.innerHTML = `
                <div style="padding: 20px; text-align: center;">
                    <h3 style="color: #333; margin-bottom: 20px;">${file.name}</h3>
                    <div style="background: linear-gradient(45deg, #f0f0f0, #e0e0e0); padding: 30px; border-radius: 10px; margin: 20px 0;">
                        <h4 style="color: #666; margin-bottom: 15px;">PDF Document Content Area</h4>
                        <p style="color: #888; line-height: 1.6;">
                            This area represents your PDF document.<br>
                            <strong>Click anywhere to add text boxes</strong> that you can drag around and edit.<br>
                            Double-click text to edit content, drag to move position.
                        </p>
                    </div>
                    <div style="margin-top: 30px; color: #28a745; font-weight: bold;">
                        ‚úÖ Document ready for editing!
                    </div>
                    <div style="margin-top: 40px; color: #666; font-size: 14px;">
                        <strong>Sample areas you can edit:</strong>
                        <div style="display: flex; justify-content: center; gap: 20px; margin-top: 15px;">
                            <div style="padding: 10px; border: 1px dashed #ccc; border-radius: 5px;">Signature Line</div>
                            <div style="padding: 10px; border: 1px dashed #ccc; border-radius: 5px;">Date Field</div>
                            <div style="padding: 10px; border: 1px dashed #ccc; border-radius: 5px;">Text Area</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Add click event to the page for adding text
            page.addEventListener('click', function(e) {
                if (currentTool === 'click' && e.target === page) {
                    addTextElement(e.offsetX, e.offsetY);
                }
            });
            
            // Add some sample editable areas
            addSampleEditableAreas();
        }

        function activateTool(tool) {
            currentTool = tool;
            
            // Update active button
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Set default text based on tool
            const textInput = document.getElementById('textInput');
            switch(tool) {
                case 'click':
                    textInput.value = 'Enter your text here';
                    break;
                case 'signature':
                    textInput.value = 'Your Signature';
                    document.getElementById('fontSize').value = '18';
                    selectedColor = '#000000';
                    updateColorSelection();
                    break;
                case 'date':
                    textInput.value = new Date().toLocaleDateString();
                    document.getElementById('fontSize').value = '14';
                    selectedColor = '#000000';
                    updateColorSelection();
                    break;
            }
            
            showStatus(`Tool activated: ${tool === 'click' ? 'Click to add text' : tool}`);
        }

        function addTextElement(x, y) {
            const text = document.getElementById('textInput').value;
            const fontSize = document.getElementById('fontSize').value;
            
            const element = {
                id: nextElementId++,
                type: 'text',
                content: text,
                fontSize: fontSize,
                color: selectedColor,
                x: x,
                y: y,
                width: 150,
                height: 40
            };
            
            elements.push(element);
            renderElement(element);
            showStatus('Text added! Drag to move, double-click to edit.');
        }

        function addSampleEditableAreas() {
            const sampleElements = [
                {
                    id: nextElementId++,
                    type: 'text',
                    content: 'Click to edit this text',
                    fontSize: '16',
                    color: '#000000',
                    x: 50,
                    y: 100,
                    width: 200,
                    height: 40
                },
                {
                    id: nextElementId++,
                    type: 'text',
                    content: 'Your Name Here',
                    fontSize: '18',
                    color: '#000000',
                    x: 50,
                    y: 200,
                    width: 180,
                    height: 40
                },
                {
                    id: nextElementId++,
                    type: 'text',
                    content: 'Date: ' + new Date().toLocaleDateString(),
                    fontSize: '14',
                    color: '#666666',
                    x: 50,
                    y: 300,
                    width: 150,
                    height: 35
                }
            ];
            
            sampleElements.forEach(element => {
                elements.push(element);
                renderElement(element);
            });
        }

        function renderElement(element) {
            const page = document.getElementById('pdfPage');
            
            const editableDiv = document.createElement('div');
            editableDiv.className = 'editable-area';
            editableDiv.id = 'element-' + element.id;
            editableDiv.textContent = element.content;
            editableDiv.style.fontSize = element.fontSize + 'px';
            editableDiv.style.color = element.color;
            editableDiv.style.left = element.x + 'px';
            editableDiv.style.top = element.y + 'px';
            editableDiv.style.width = element.width + 'px';
            editableDiv.style.minHeight = element.height + 'px';
            
            // Make editable on double click
            editableDiv.addEventListener('dblclick', function() {
                this.contentEditable = true;
                this.focus();
                showStatus('Editing mode: Type your text, press Enter to finish');
            });
            
            editableDiv.addEventListener('blur', function() {
                this.contentEditable = false;
                // Update element content
                const elementId = parseInt(this.id.split('-')[1]);
                const elementObj = elements.find(el => el.id === elementId);
                if (elementObj) {
                    elementObj.content = this.textContent;
                }
                showStatus('Text updated');
            });
            
            editableDiv.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    this.blur();
                }
            });
            
            // Make draggable
            makeDraggable(editableDiv, element.id);
            
            page.appendChild(editableDiv);
        }

        function makeDraggable(element, elementId) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            
            element.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                if (element.contentEditable) return;
                
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
                
                element.style.zIndex = '1000';
                element.style.boxShadow = '0 4px 15px rgba(0,0,0,0.3)';
            }
            
            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                
                const elementObj = elements.find(el => el.id === elementId);
                if (elementObj) {
                    elementObj.x = element.offsetLeft - pos1;
                    elementObj.y = element.offsetTop - pos2;
                }
                
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
                element.style.zIndex = '';
                element.style.boxShadow = '';
                showStatus('Text moved to new position');
            }
        }

        function selectColor(color) {
            selectedColor = color;
            updateColorSelection();
        }

        function updateColorSelection() {
            document.querySelectorAll('.color-option').forEach(option => {
                option.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        function applyTextSettings() {
            const fontSize = document.getElementById('fontSize').value;
            
            elements.forEach(element => {
                element.fontSize = fontSize;
                element.color = selectedColor;
                
                const elementDiv = document.getElementById('element-' + element.id);
                if (elementDiv) {
                    elementDiv.style.fontSize = fontSize + 'px';
                    elementDiv.style.color = selectedColor;
                }
            });
            
            showStatus('Text settings applied to all elements');
        }

        function clearAll() {
            if (confirm('Remove all text elements?')) {
                elements = [];
                document.querySelectorAll('.editable-area').forEach(el => el.remove());
                showStatus('All text elements cleared');
            }
        }

        function showStatus(message) {
            const statusEl = document.getElementById('statusMessage');
            statusEl.textContent = message;
            statusEl.style.display = 'block';
            
            setTimeout(() => {
                statusEl.style.display = 'none';
            }, 4000);
        }

        function downloadPDF() {
            if (!currentFile) {
                alert('No PDF file loaded');
                return;
            }
            
            // Create PDF content summary
            let pdfContent = `PDF EDITING SUMMARY
====================

Original File: ${currentFile.name}
Edited Date: ${new Date().toLocaleString()}
Total Elements Added: ${elements.length}

ELEMENTS ADDED:
`;

            elements.forEach((element, index) => {
                pdfContent += `
${index + 1}. ${element.content}
   - Position: (${element.x}, ${element.y})
   - Font Size: ${element.fontSize}px
   - Color: ${element.color}
`;
            });

            pdfContent += `

INSTRUCTIONS:
This is a demonstration of PDF editing capabilities.
In a production environment, this would generate an actual PDF file
with your text elements properly embedded at their positions.

Your edits have been saved and can be reproduced in the actual PDF.
`;

            // Create and download the summary
            const blob = new Blob([pdfContent], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `EDITED_${currentFile.name.replace('.pdf', '_summary.txt')}`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showStatus('‚úÖ Download complete! Check your downloads folder.');
        }

        // Drag and drop support
        const uploadSection = document.getElementById('uploadSection');
        
        uploadSection.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadSection.style.background = '#e3f2fd';
        });
        
        uploadSection.addEventListener('dragleave', () => {
            uploadSection.style.background = '#f8f9fa';
        });
        
        uploadSection.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadSection.style.background = '#f8f9fa';
            if (e.dataTransfer.files[0]) {
                loadPDF(e.dataTransfer.files[0]);
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            showStatus('Upload a PDF file to start editing');
        });
    </script>
</body>
</html>
