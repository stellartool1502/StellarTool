<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Text Case Converter - Stellar Tools</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Fallback styles in case Tailwind CDN fails */
    body {
      font-family: Arial, sans-serif;
      background: #f3f4f6;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      padding: 1rem;
    }
    .container {
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      padding: 1.5rem;
      max-width: 28rem;
      width: 100%;
    }
    textarea, .output {
      border: 2px solid #3b82f6;
      border-radius: 0.5rem;
      padding: 0.75rem;
      width: 100%;
      box-sizing: border-box;
    }
    button {
      background: #3b82f6;
      color: white;
      border: none;
      border-radius: 0.5rem;
      padding: 0.5rem 1rem;
      cursor: pointer;
    }
    button:hover {
      background: #2563eb;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2 class="text-2xl font-bold text-blue-600 text-center mb-4">Text Case Converter</h2>
    
    <textarea
      id="inputText"
      class="w-full h-32 border-2 border-blue-500 rounded-lg p-3 text-base resize-none mb-4 focus:outline-none focus:ring-2 focus:ring-blue-500"
      placeholder="Type or paste your text here..."
    ></textarea>
    
    <div class="grid grid-cols-2 gap-2 mb-4">
      <button
        onclick="convertText('upper')"
        class="bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
      >UPPERCASE</button>
      <button
        onclick="convertText('lower')"
        class="bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
      >lowercase</button>
      <button
        onclick="convertText('title')"
        class="bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
      >Title Case</button>
      <button
        onclick="convertText('sentence')"
        class="bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
      >Sentence case</button>
      <button
        onclick="convertText('toggle')"
        class="bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
      >Toggle Case</button>
      <button
        onclick="clearText()"
        class="bg-gray-500 text-white rounded-lg py-2 px-4 hover:bg-gray-600 transition text-sm"
      >Clear</button>
    </div>
    
    <div
      id="output"
      class="border-2 border-blue-500 rounded-lg p-3 min-h-[100px] bg-blue-50 text-base whitespace-pre-wrap mb-4"
    ></div>
    
    <button
      onclick="copyText()"
      class="w-full bg-blue-500 text-white rounded-lg py-2 px-4 hover:bg-blue-600 transition text-sm"
    >Copy Output</button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      function convertText(type) {
        try {
          const inputText = document.getElementById("inputText");
          if (!inputText) throw new Error("Input textarea not found");
          const text = inputText.value;
          let result = "";

          switch (type) {
            case 'upper':
              result = text.toUpperCase();
              break;
            case 'lower':
              result = text.toLowerCase();
              break;
            case 'title':
              result = text.toLowerCase().replace(/\b\w/g, char => char.toUpperCase());
              break;
            case 'sentence':
              result = text.toLowerCase().replace(/(^\s*\w|[\.\!\?]\s*\w)/g, char => char.toUpperCase());
              break;
            case 'toggle':
              result = text.split("").map(char => 
                char === char.toUpperCase() ? char.toLowerCase() : char.toUpperCase()
              ).join("");
              break;
            default:
              throw new Error("Invalid conversion type");
          }

          const outputDiv = document.getElementById("output");
          if (!outputDiv) throw new Error("Output div not found");
          outputDiv.textContent = result;
        } catch (err) {
          console.error("Conversion error:", err);
          alert("An error occurred while converting the text. Please try again.");
        }
      }

      function clearText() {
        try {
          const inputText = document.getElementById("inputText");
          const outputDiv = document.getElementById("output");
          if (!inputText || !outputDiv) throw new Error("Input or output element not found");
          inputText.value = "";
          outputDiv.textContent = "";
        } catch (err) {
          console.error("Clear error:", err);
          alert("An error occurred while clearing the text. Please try again.");
        }
      }

      async function copyText() {
        try {
          const outputDiv = document.getElementById("output");
          if (!outputDiv) throw new Error("Output div not found");
          const output = outputDiv.textContent;
          if (!output) {
            alert("No text to copy!");
            return;
          }
          await navigator.clipboard.writeText(output);
          alert("Output copied to clipboard!");
        } catch (err) {
          console.error("Copy error:", err);
          alert("Failed to copy text. Please try again.");
        }
      }

      // Expose functions to global scope safely
      window.convertText = convertText;
      window.clearText = clearText;
      window.copyText = copyText;
    });
  </script>
</body>
</html>
